"use strict";(self.webpackChunkwhatstore_merchant_panel=self.webpackChunkwhatstore_merchant_panel||[]).push([[832],{9655:function(e,t,n){var r=n(4942),l=n(5987),a=n(5697),o=n.n(a),c=n(7294),i=n(5900),u=n.n(i),s=n(5893),m=["className","variant"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p={"aria-label":o().string,onClick:o().func,variant:o().oneOf(["white"])},f=c.forwardRef((function(e,t){var n=e.className,a=e.variant,o=(0,l.Z)(e,m);return(0,s.jsx)("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({ref:t,type:"button",className:u()("btn-close",a&&"btn-close-".concat(a),n)},o))}));f.displayName="CloseButton",f.propTypes=p,f.defaultProps={"aria-label":"Close"},t.Z=f},2719:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(5987),l=n(4942),a=n(5900),o=n.n(a),c=n(7294),i=n(8870),u=n(9541),s=n(4709),m=c.createContext(null);m.displayName="InputGroupContext";var d=m,p=n(5893),f=["bsPrefix","size","hasValidation","className","as"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=(0,i.Z)("input-group-text",{Component:"span"}),g=c.forwardRef((function(e,t){var n=e.bsPrefix,l=e.size,a=e.hasValidation,i=e.className,s=e.as,m=void 0===s?"div":s,v=(0,r.Z)(e,f);n=(0,u.vE)(n,"input-group");var h=(0,c.useMemo)((function(){return{}}),[]);return(0,p.jsx)(d.Provider,{value:h,children:(0,p.jsx)(m,E(E({ref:t},v),{},{className:o()(i,n,l&&"".concat(n,"-").concat(l),a&&"has-validation")}))})}));g.displayName="InputGroup";var b=Object.assign(g,{Text:h,Radio:function(e){return(0,p.jsx)(h,{children:(0,p.jsx)(s.Z,E({type:"radio"},e))})},Checkbox:function(e){return(0,p.jsx)(h,{children:(0,p.jsx)(s.Z,E({type:"checkbox"},e))})}})},2987:function(e,t,n){var r=n(5987),l=n(4942),a=(n(7294),n(5210)),o=n(962),c=n(4650),i=n(1444),u=n(8333),s=n(2002),m=n(5254),d=n(3888),p=n(8771),f=n(5893),v=["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=e.props,n=t.title,r=t.eventKey,l=t.disabled,a=t.tabClassName,o=t.tabAttrs,c=t.id;return null==n?null:(0,f.jsx)(u.Z,{as:"li",role:"presentation",children:(0,f.jsx)(i.Z,h(h({as:"button",type:"button",eventKey:r,disabled:l,id:c,className:a},o),{},{children:n}))})}var b=function(e){var t=(0,a.Ch)(e,{activeKey:"onSelect"}),n=t.id,l=t.onSelect,i=t.transition,u=t.mountOnEnter,E=t.unmountOnExit,b=t.children,y=t.activeKey,O=void 0===y?function(e){var t;return(0,d.Ed)(e,(function(e){null==t&&(t=e.props.eventKey)})),t}(b):y,x=(0,r.Z)(t,v);return(0,f.jsxs)(o.Z,{id:n,activeKey:O,onSelect:l,transition:(0,p.Z)(i),mountOnEnter:u,unmountOnExit:E,children:[(0,f.jsx)(c.Z,h(h({},x),{},{role:"tablist",as:"ul",children:(0,d.UI)(b,g)})),(0,f.jsx)(s.Z,{children:(0,d.UI)(b,(function(e){var t=h({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,f.jsx)(m.Z,h({},t))}))})]})};b.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},b.displayName="Tabs",t.Z=b},4280:function(e,t,n){n.d(t,{G:function(){return i},Q:function(){return c}});var r=n(5861),l=n(4687),a=n.n(l),o=n(448),c=function(){var e=(0,r.Z)(a().mark((function e(t){var n,r,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=0),e.prev=1,n=JSON.parse(localStorage.getItem("store_")),r=n.seller_id,e.next=5,fetch(o.D.DOMAIN+"/orders/"+r+"/10/"+t);case 5:return l=e.sent,e.next=8,l.json();case 8:return l=e.sent,e.abrupt("return",l);case 12:throw e.prev=12,e.t0=e.catch(1),console.log(e.t0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=(0,r.Z)(a().mark((function e(t,n,r,l){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(o.D.DOMAIN+"/order/"+t+"/"+n+"/"+r+"/"+l,{method:"PUT","content-type":"application/json"});case 3:return c=e.sent,e.next=6,c.json();case 6:return c=e.sent,console.log(c),e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{data:"error"});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,r,l){return e.apply(this,arguments)}}()},8161:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(7294),l=n(310),a=n(6594),o=n(1597),c=n(1951),i=n(9029),u={height:65,color:"rgb(238, 238, 238)",display:"grid",gridTemplateColumns:"1fr 6fr 1fr",padding:"0.6rem",placeItems:"center",background:"rgba(0,103,86,255)",boxShadow:"0 8px 32px 0 rgba(0,103,86,255)",backdropFilter:"blur( 16.5px )",fontFamily:"sans-serif",fontWeight:"700"},s={display:"flex",alignItems:"flex-end"},m={width:"2.5rem",margin:"0 10px"};function d(e){var t=e.button_text,n=e.button_action;if(i.j){var d=(0,r.useState)({text:t,action:n}),p=d[0];d[1];return(0,r.useEffect)((function(){if(i.j){var e=localStorage.getItem("CSRF_token");"undefined"!==e&&"null"!==e&&e||location.href.includes("login")||location.href.includes("signup")||(0,o.navigate)("/login"),e&&(0,c.T)().then((function(e){if(e.success){var t=JSON.parse(localStorage.store_);t.email=e.email,t.number=e.number,localStorage.setItem("store_",JSON.stringify(t)),(location.href.includes("login")||location.href.includes("signup"))&&(0,o.navigate)("/products/")}else"/login/"!==location.pathname&&"/signup/"!==location.pathname&&(0,o.navigate)("/login/")})).catch((function(e){console.log(e.data)}))}}),[]),console.log(p),r.createElement("header",null,r.createElement("nav",{style:u},r.createElement("div",{style:s},r.createElement("img",{src:l.Z,style:m}),r.createElement("span",null,"Redcat")),r.createElement("div",null),r.createElement(a.Z,{variant:"outline-light",onClick:p.action},p.text)))}}},398:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(5861),l=n(2982),a=n(4687),o=n.n(a),c=n(7294),i=n(8678),u=(n(8161),n(1372)),s=n(2987),m=n(6746),d=n(9655),p=n(4280),f=n(8169),v=n(6594),E=n(2957),h=n(2719),g=n(5893),b=n(8500),y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e},y.apply(this,arguments)},O=(0,c.forwardRef)((function(e,t){return(0,g.jsx)(b.q,y({},e,{ref:t},{children:(0,g.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}))}));function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j={display:"flex",height:"calc(100vh)",background:"rgb(250,250,250)"},S={position:"absolute",top:"20vh",background:"#333a",width:"100vw",height:"100vh",display:"grid",transform:"translate(0vw , -20vh)",placeItems:"center"},Z={flexGrow:2,flexFlow:"column",alignItems:"flex-start",paddingLeft:"12.5rem",overflowY:"auto",width:"100vw",height:"100vh"},_={flexGrow:2,flexFlow:"column",alignItems:"flex-start",paddingLeft:"6.5rem",overflowY:"auto",width:"100vw",height:"100vh"},k={background:"#fff",placeItems:"center",isolation:"isolate",minWidth:"60vw",padding:"3rem",borderRadius:"10PX",height:"fit-content",boxShadow:"0 0 0 10px #333c"};function N(){if("undefined"!=typeof window){var e=localStorage.getItem("collapsed"),t=(0,c.useState)("active"),n=t[0],a=t[1],g=(0,c.useState)([]),b=g[0],y=g[1],w=(0,c.useState)([]),N=w[0],C=w[1],P=(0,c.useState)([]),D=P[0],I=P[1],A=(0,c.useState)([]),K=A[0],R=A[1],z=(0,c.useState)(!1),F=z[0],T=z[1],H=(0,c.useState)({}),$=H[0],q=H[1],M=(0,c.useState)(""),G=M[0],L=M[1],W=(0,c.useState)(!1),Q=W[0],U=W[1],V=(0,c.useState)(""),J=V[0],Y=V[1],B=(0,c.useState)("true"===e),X=B[0],ee=B[1];(0,c.useEffect)((function(){localStorage.setItem("collapsed",X)}),[X]),(0,c.useEffect)((function(){(0,p.Q)().then((function(e){if(console.log(e),e)if(e.order.length){for(var t,n=x(e.order);!(t=n()).done;)for(var r,a=t.value,o=x(a.products);!(r=o()).done;){var c=r.value;a.amount?a.amount+=Number(c.product.price)*Number(c.quantity):a.amount=Number(c.product.price)*Number(c.quantity)}y((0,l.Z)(e.order.filter((function(e){return"completed"!==e.order_status&&"delivered"!==e.delivery_status})))),C((0,l.Z)(e.order.filter((function(e){return"completed"===e.order_status||"delivered"===e.delivery_status})))),T(!1)}else Y("No Orders have been made till now")})).catch((function(e){console.log(e),Y("Something Went wrong While looking for Invoices ")}))}),[K]),(0,c.useEffect)((function(){I((0,l.Z)(b))}),[b]),(0,c.useEffect)((function(){console.log(n),I("active"===n?(0,l.Z)(b):(0,l.Z)(N))}),[n]);var te=function(e){var t=e.delivery_status;switch(console.log(t),t){case"delivered":break;case"order_placed":return c.createElement(E.Z.Select,{size:"md","data-invoice":$.invoice_number,onChange:function(e){L(e.target.value),U(!0)}},c.createElement("option",{value:"order_placed"},"Order Placed"),c.createElement("option",{value:"en-route"},"En-Route"),c.createElement("option",{value:"delivered"},"Delivered"));default:return c.createElement(E.Z.Select,{size:"md","data-invoice":$.invoice_number,onChange:function(e){L(e.target.value),U(!0)}},c.createElement("option",{value:"en-route"},"En-Route"),c.createElement("option",{value:"delivered"},"Delivered"))}},ne=function(e){var t=e.target.parentElement.dataset.key;console.log(t),console.log(e.target.parentElement),D.length&&(console.log(e.target.parentElement),T(!0),q(Object.assign({},D[Number(t)])))},re=function(){var e=(0,r.Z)(o().mark((function e(t,n){var r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.G)(t,n);case 2:r=e.sent,console.log(r),U(!1),"completed"!==(a=r.order).order_status&&"delivered"!==a.delivery_status?y((function(e){var t=e.filter((function(e,t){if(e.invoice_number===a.invoice_number)return t}));return t&&(e[t]=a),(0,l.Z)(e)})):C((function(e){var t=e.filter((function(e,t){if(e.invoice_number===a.invoice_number)return t}));return t&&(e[t]=a),(0,l.Z)(e)})),R(50*Math.random());case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){console.log($)}),[$]),c.createElement(i.Z,null,c.createElement("div",{id:"wrapper",style:j},c.createElement(u.Y,{selected:"orders",collapsed:X,setCollapsed:ee}),J?c.createElement("div",{style:{width:"100vw",height:"calc(100vh)",background:"azure",display:"grid",placeItems:"center"}},c.createElement("p",null,J)):F&&Object.keys($).length?c.createElement("div",{style:S},c.createElement("div",{style:k},c.createElement(d.Z,{onClick:function(){return T(!1)},style:{float:"right",margin:"-1.5rem"}}),c.createElement("div",{style:{borderRadius:10,boxShadow:"0 1px 30px 1px #3335",padding:"2rem"}},c.createElement("header",null,c.createElement("p",null,"Date : ",new Date($.created_on).toLocaleString()),c.createElement("p",null,"Invoice No.",$.invoice_number),c.createElement("h6",null,"Customer Name: Akshay"),c.createElement("h6",null,"Address: Rf/23 , new street , Hunghom , hongkong")),c.createElement("article",null,c.createElement(f.Z,null,c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null,"No."),c.createElement("th",null,"Product Name"),c.createElement("th",null,"Quantity"),c.createElement("th",null,"Price ($HKD)"),c.createElement("th",null,"Added cost ($HKD)"),c.createElement("th",null,"Amt.($HKD)"))),c.createElement("tbody",null,$.products.length?$.products.map((function(e,t){return c.createElement("tr",null,c.createElement("td",null,t),c.createElement("td",null,c.createElement("p",{style:{margin:"10px 0"}},c.createElement("b",null,e.product.title)),c.createElement("p",{style:{margin:0}},e.properties.length?Object.entries(e.properties[0]).map((function(e){return e.join(" : ")})).join("  "):null)),c.createElement("td",null,e.quantity),c.createElement("td",null,e.product.price),c.createElement("td",null,e.extra_charges),c.createElement("td",null,Number(e.quantity)*Number(e.product.price)))})):c.createElement("tr",null,c.createElement("td",{colspan:"6",style:{textAlign:"center"}},"No Products found"))),c.createElement("tfoot",null,c.createElement("tr",null,c.createElement("td",{colspan:5},c.createElement("b",null,"Total")),c.createElement("td",null,$.gross_price))))),c.createElement("div",null,c.createElement("p",null,"Delivery Status:"),"delivered"!==$.delivery_status&&"confirmed_delivery"!==$.delivery_status?c.createElement(c.Fragment,null,c.createElement(te,{delivery_status:$.delivery_status}),Q?c.createElement(v.Z,{style:{margin:"15px 0"},onClick:function(){return re($.invoice_number,G)}},"Save Changes"):null):c.createElement("b",null,$.delivery_status))))):c.createElement("div",{style:X?Z:_},c.createElement("h3",{style:{marginTop:"2rem"}},"Received Orders"),c.createElement("p",null,'Make sure to Update Status of Order as "En-Route" As soon is it Sent for shipping'),c.createElement(s.Z,{activeKey:n,onSelect:function(e){return a(e)},className:"mb-3"},c.createElement(m.Z,{eventKey:"active",title:"Active Orders"},c.createElement("div",null,c.createElement("div",null,c.createElement(h.Z,null,c.createElement(E.Z.Control,{placeholder:"Search by invoice No.","aria-label":"Search invoices by invoice no."}),c.createElement(v.Z,{variant:"outlined-primary"},c.createElement(O,null)))),c.createElement(f.Z,null,c.createElement("thead",null,c.createElement("th",null,"Status"),c.createElement("th",null,"Date"),c.createElement("th",null,"Invoice No."),c.createElement("th",null,"Customer"),c.createElement("th",null,"Item"),c.createElement("th",null,"Options"),c.createElement("th",null,"Qty."),c.createElement("th",null,"Rate (HK$)"),c.createElement("th",null,"Amount (HK$)")),c.createElement("tbody",null,D.length?D.map((function(e,t){return c.createElement("tr",{onClickCapture:function(e){return ne(e)},"data-key":t,key:t,style:{verticalAlign:"middle"}},c.createElement("td",{onClick:function(e){return ne(e)},style:{borderRadius:"10px 0 0 10px",padding:"1.5rem 0",textAlign:"center",background:"order_placed"===e.delivery_status?"#65f265":"#65e0f2",fontWeight:"700"}},e.delivery_status),c.createElement("td",null,new Date(""+e.created_on).toLocaleString()),c.createElement("td",null,e.invoice_number?e.invoice_number:"00"+t),c.createElement("td",null,"Customer"),e.products.map((function(t,n){return c.createElement(c.Fragment,null,c.createElement("td",null,c.createElement("p",{style:{margin:"1.2rem 0 0 0"}},c.createElement("b",null,e.products.length>1?n:null),t.product.title),c.createElement("br",null)),c.createElement("td",null,t.properties.map((function(e){return console.log(e),c.createElement(c.Fragment,null,c.createElement("p",{style:{margin:0}},c.createElement("b",null,"Color")," : ",e.colors?e.colors:"-"),c.createElement("p",{style:{margin:0}},c.createElement("b",null,"Size")," : ",e.sizes?e.sizes:"-"),c.createElement("p",{style:{margin:0}},c.createElement("b",null,"Variation")," : ",e.variations?e.variations:"-"))}))),c.createElement("td",null,t.quantity),c.createElement("td",null,Number(t.product.price)))})),c.createElement("td",null,e.amount),c.createElement("td",null),c.createElement("td",null))})):null)))),c.createElement(m.Z,{eventKey:"completed",title:"Completed Orders"},c.createElement("div",null,c.createElement("div",null,c.createElement(h.Z,null,c.createElement(E.Z.Control,{placeholder:"Search by invoice No.","aria-label":"Search invoices by invoice no."}),c.createElement(v.Z,{variant:"outlined-primary"},c.createElement(O,null)))),c.createElement(f.Z,{className:"hover"},c.createElement("thead",null,c.createElement("th",null,"Status"),c.createElement("th",null,"Date"),c.createElement("th",null,"Invoice No."),c.createElement("th",null,"Customer"),c.createElement("th",null,"Item"),c.createElement("th",null,"Options"),c.createElement("th",null,"Qty."),c.createElement("th",null,"Rate (HK$)"),c.createElement("th",null,"Amount (HK$)")),c.createElement("tbody",null,D.length?D.map((function(e,t){return c.createElement("tr",{onClick:function(e){return ne(e)},"data-key":t,key:t,style:{verticalAlign:"middle"}},c.createElement("td",{style:{borderRadius:"10px 0 0 10px",padding:"1.5rem 0",textAlign:"center",background:"order_placed"===e.delivery_status?"#65f265":"#65e0f2",fontWeight:"700"}},e.delivery_status),c.createElement("td",null,new Date(""+e.created_on).toLocaleString()),c.createElement("td",null,e.invoice_number?e.invoice_number:"00"+t),c.createElement("td",null,"Customer"),e.products.map((function(t,n){return c.createElement(c.Fragment,null,c.createElement("td",null,c.createElement("p",{style:{margin:"1.2rem 0 0 0"}},c.createElement("b",null,e.products.length>1?n:null),t.product.title),c.createElement("br",null)),c.createElement("td",null,t.properties.map((function(e){return console.log(e),c.createElement(c.Fragment,null,c.createElement("p",{style:{margin:0}},c.createElement("b",null,"Color")," : ",e.colors?e.colors:"-"),c.createElement("p",{style:{margin:0}},c.createElement("b",null,"Size")," : ",e.sizes?e.sizes:"-"),c.createElement("p",{style:{margin:0}},c.createElement("b",null,"Variation")," : ",e.variations?e.variations:"-"))}))),c.createElement("td",null,t.quantity),c.createElement("td",null,Number(t.product.price)))})),c.createElement("td",null,e.amount),c.createElement("td",null),c.createElement("td",null))})):null))))))))}}}}]);
//# sourceMappingURL=component---src-pages-orders-js-80cc6ba3fb39eb802d84.js.map
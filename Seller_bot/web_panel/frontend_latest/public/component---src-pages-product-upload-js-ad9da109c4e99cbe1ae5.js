"use strict";(self.webpackChunkwhatstore_merchant_panel=self.webpackChunkwhatstore_merchant_panel||[]).push([[814],{994:function(e,t,n){var r=n(4942),a=n(5987),l=n(5900),o=n.n(l),c=n(7294),i=n(9541),s=n(5893),u=["bsPrefix","className","as"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=c.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,l=e.as,c=void 0===l?"div":l,m=(0,a.Z)(e,u),p=(0,i.vE)(n,"row"),g=(0,i.pi)(),f=(0,i.zG)(),h="".concat(p,"-cols"),E=[];return g.forEach((function(e){var t,n=m[e];delete m[e],t=null!=n&&"object"==typeof n?n.cols:n;var r=e!==f?"-".concat(e):"";null!=t&&E.push("".concat(h).concat(r,"-").concat(t))})),(0,s.jsx)(c,d(d({ref:t},m),{},{className:o().apply(void 0,[r,p].concat(E))}))}));p.displayName="Row",t.Z=p},8223:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var r=n(2982),a=n(5861),l=n(4687),o=n.n(l),c=n(7294),i=n(6594),s=n(9655),u=n(2957),m=n(6746),d=n(4650),p=n(994),g=n(7408),f=n(1984),h=n(7117),E=(n(8161),n(8678)),b=n(1372),v=n(7187),y=n(171),w=n(8881),k=n(9717),x=n(6636),_=n(8169);function N(e){var t=e.editable,n=e.setEditable,a=e.products,l=(e.setProducts,e.checked),o=e.setChecked,i=(e.tab,e.setEditingInto);(0,c.useEffect)((function(){n([])}),[]);return(0,c.useEffect)((function(){console.log(a),console.log(t),t.length?(1===t.length?i(t[0]):i(),l||o(!0)):o(!1)}),[t]),c.createElement("div",{style:{width:"90vw",overflowX:"auto"}},c.createElement(_.Z,{hover:!0,style:{margin:"1rem 0"}},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",null),c.createElement("th",null,"No."),c.createElement("th",null,"Status"),c.createElement("th",null,"Image"),c.createElement("th",null,"Title"),c.createElement("th",null,"Price"),c.createElement("th",null,"Regular price"),c.createElement("th",null,"Stock"),c.createElement("th",null,"Category"),c.createElement("th",null,"Description"),c.createElement("th",null,"Colors"),c.createElement("th",null,"Sizes"),c.createElement("th",null,"Variations"))),c.createElement("tbody",null,a.length?a.map((function(e,a){if(e)return c.createElement("tr",null,c.createElement("td",{"data-key":e.product_id},c.createElement(u.Z.Check,{type:"checkbox",style:{width:"1.5rem",height:"1.5rem"},"data-key":e.product_id,onClick:function(e){return function(e){var a=e.target.dataset.key;e.target.checked?t.includes(a)||n((function(t){return[e.target.dataset.key].concat((0,r.Z)(t))})):n((function(e){var t=e.filter((function(e){return e!==Number(a)}));return console.log(t),(0,r.Z)(t)}))}(e)}})),c.createElement("td",null,a),c.createElement("td",null,e.status?e.status:"private"),e.hasImage?c.createElement("td",{style:{width:185,display:"block",paddingBottom:12,marginRight:"-1rem"}},c.createElement("img",{src:e.imageData||e.image,style:{maxWidth:150,minWidth:120,borderRadius:10,maxHeight:190,minHeight:160},alt:e.title})):c.createElement("td",null,e.image.replace("./static/images/",""),c.createElement("br",null),c.createElement("span",{style:{border:"#e11",color:"red"}},"Image Required ",console.log(e))),c.createElement("td",{style:{marginLeft:"1rem"}},c.createElement("b",null,e.title)),c.createElement("td",null,e.price),c.createElement("td",null,e.originalPrice),c.createElement("td",null,e.stock),c.createElement("td",null,e.category),c.createElement("td",{style:{padding:"0.5rem 0.2rem"}},c.createElement("div",{style:{width:"190px",height:160,background:"transparent",border:0,resize:"both",overflow:"auto"}},e.description)),c.createElement("td",null,e.colors),c.createElement("td",null,e.sizes),c.createElement("td",null,e.variations))})):null)))}var S=n(1597);function Z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(){if("undefined"!=typeof window){var e=localStorage.getItem("collapsed"),t=(0,c.useState)(!0),n=t[0],l=(t[1],(0,c.useState)([])),_=l[0],I=l[1],O=(0,c.useState)([]),P=O[0],j=O[1],C=(0,c.useState)([]),A=C[0],F=C[1],R=(0,c.useState)("men_clothing"),D=R[0],B=R[1],L=(0,c.useState)("file"),z=L[0],M=L[1],T=(0,c.useState)(!1),U=T[0],W=T[1],K=(0,c.useState)(!1),H=(K[0],K[1],(0,c.useState)(null)),G=(H[0],H[1]),J=(0,c.useState)(!1),q=J[0],Y=J[1],V=(0,c.useState)([]),X=V[0],$=V[1],Q=(0,c.useState)([]),ee=Q[0],te=Q[1],ne=(0,c.useState)("all"),re=ne[0],ae=ne[1],le=(0,c.useState)(!1),oe=(le[0],le[1]),ce=(0,c.useState)("true"===e),ie=ce[0],se=ce[1],ue=["title","image","price","originalprice","stock","description","colors","sizes","variations"],me=function(){var e=[],t=[],n=[],r=[];return _.forEach((function(a,l){"object"==typeof r&&(r.includes(a.title)?e.push({name:a.title,index:l}):r.push(a.title)),a.description||(a.description="No further description found"),a.originalPrice&&("string"!=typeof a.originalPrice||a.originalPrice.length)||(a.originalPrice=a.price),isNaN(Number(a.price))&&t.push({type:"Price",value:a.price,index:l}),isNaN(Number(a.stock))&&t.push({type:"Stock",value:a.stock,index:l}),a.hasImage||n.push({index:l,name:a.image})})),{duplicate_name:e,incorrect_number:t,no_image:n}},de=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,a,l,c,i,s,u,m,d,p,g;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=me(),n=t.duplicate_name,a=t.incorrect_number,l=t.no_image,c="",console.log(n,a,l),n.length&&(c+="Duplicate product names Not Allowed<br/>",n.length>2?(s+="Duplicate product names Not Allowed\n",n.forEach((function(e){return s+="@"+e.index+" , name: "+e.name+"\n"}))):(n.forEach((function(e){return c+="@"+e.index+" , name: "+e.name+"<br/>"})),c+="<hr/>")),!a.length){e.next=12;break}if(!(a.length>5)){e.next=9;break}a.forEach((function(e){return u+=e.type+" Should be an Integer<br/>@"+e.index+" , "+e.type+": "+e.value+"\n"})),e.next=12;break;case 9:return e.next=11,a.forEach((function(e){return c+=e.type+" Should be an Integer<br/>@"+e.index+" , "+e.type+": "+e.value+"<br/>"}));case 11:c+="<hr/>";case 12:if(l.length&&(c+="Images are Mandatory<br/>(found image absent in "+l.reduce((function(e,t,n){return n+1}))+" items)<br/>",l.length>2?(i+="Images are Mandatory<br/>(found image absent in "+l.reduce((function(e,t,n){return n+1}))+" items)\n",l.forEach((function(e){return i+="@"+e.index+" , image name:"+e.name.slice(0,130)+"\n"}))):(l.forEach((function(e){return c+="@"+e.index+" , image name:"+e.name.slice(0,30)+"<br/>"})),c+="<hr/>")),!c||!(n.length||l.length||a.length)){e.next=19;break}return m="<b>"+c+"</b><hr/>",m+=i?"<a style='"+error_download_file+"' href=\""+window.URL.createObjectURL(new Blob([i],{type:"plain/text"}))+'" download=\'redcat_image_errors.txt\'>Image Error File <img style="width:16px;margin-top:-7px;margin-right:7px" src="'+v.Z+'"/></a><br/>':"",m+=s?"<a style='"+error_download_file+"' href='"+window.URL.createObjectURL(new Blob([s],{type:"plain/text"}))+"' download='redcat_name_errors.txt'>Names Error File <img style=\"width:16px;margin-top:-7px;margin-right:7px\" src="+v.Z+"/></a><br/>":"",m+=u?"<a style='"+error_download_file+"' href='"+window.URL.createObjectURL(new Blob([u],{type:"plain/text"}))+"' download='redcat_data_errors.txt'>Integrity Error File <img style=\"width:16px;margin-top:-7px;margin-right:7px\" src="+v.Z+"/></a><br/>":"",e.abrupt("return",h.Report.warning("Found Errors",m,"Ok",{backOverlayColor:"#333a",messageFontSize:16,messageFontWeight:700,plainText:!1,messageMaxLength:12200}));case 19:if(c){e.next=39;break}d=Z(_);case 21:if((p=d()).done){e.next=39;break}return(g=p.value).price=Number(g.price),g.stock=Number(g.stock),g.originalPrice=Number(g.originalprice),g.imageData=g.image,g.hasImage=!0,g.seller_data=JSON.parse(localStorage.getItem("store_")).seller_id,g.number=JSON.parse(localStorage.getItem("store_")).number,e.prev=30,e.delegateYield(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g.properties=[{colors:g.colors,sizes:g.sizes,variations:g.variations}],console.log(g),e.next=4,(0,k.kG)(Object.assign({},g));case 4:t=e.sent,console.log(t),t.success?(M("file"),I([]),(0,S.navigate)("/product/all")):$((function(e){return[].concat((0,r.Z)(e),[{name:e.name,message:t.message}])}));case 7:case"end":return e.stop()}}),e)}))(),"t0",32);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(30),console.log(e.t1);case 37:e.next=21;break;case 39:case"end":return e.stop()}}),e,null,[[30,34]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){if(X.length){for(var e,t="",n=Z(X);!(e=n()).done;){var r=e.value;r.name&&r.message&&(t+="In Item : "+r.name+" , Error : "+r.message+"\n")}t.length&&h.Report.failure((1===X.length?"Error":"Errors")+" Found in Adding data",t,"Ok")}}),[X]),(0,c.useEffect)((function(){for(var e,t=function(){var t=e.value;console.log(A);_.map((function(e){console.log(t,e),e.image.replace(".jpg","").replace(".jpeg","").replace(".png","")===t.name.replace(".jpg","").replace(".jpeg","").replace(".png","")&&(e.hasImage=!0,e.imageFileName=e.image,e.imageData=t.data,e.image=t.data)}));I((function(e){return(0,r.Z)(_)}))},n=Z(A);!(e=n()).done;)t()}),[A]),(0,c.useEffect)((function(){console.log(_)}),[_]),(0,c.useEffect)((function(){if(oe(!0),console.log(P),P.length){var e=P[0];e=e.map((function(e){return e.toLowerCase()}));var t=function(e,t){for(var n,r=new Set(e),a=Z(t);!(n=a()).done;){var l=n.value;r.has(l)?r.delete(l):r.add(l)}return r}(new Set(ue),new Set(e));if(t.size>0)return M("file"),oe(!1),h.Report.warning("<b>Issues in Headers found</b>","These Headers do not match Or , are not needed:<br/>"+Array.from(t).join(" , "),"Ok");var n=[],r={},a=P.slice(1);for(var l in e)r[e[l]]=l;for(var o,c=Z(a);!(o=c()).done;){var i=o.value;if(i.length&&i[0]){for(var s,u={},m=Z(e);!(s=m()).done;){var d=s.value;i[r[d]]&&(u[d]=i[r[d]])}u.hasImage=!1,u.category=D,u.product_id=1e4*Math.random(),n.push(u)}}n.length&&(I((function(e){console.log(e)})),M("images"),oe(!1),I(n)),console.log(n)}}),[P]);return c.createElement(E.Z,null,c.createElement("div",{id:"wrapper",className:"wrapper"},c.createElement(b.Y,{selected:"products",collapsed:ie,setCollapsed:se}),n?null:c.createElement("div",{style:{width:"100%",height:"100%",pointerEvents:"none",position:"absolute",display:"grid",placeItems:"center"}},c.createElement("p",null,"No Products Found")),c.createElement("div",{className:ie?"page_wrapper":"collapsed_page_wrapper"},q?c.createElement("div",{className:"ActionIcons"},c.createElement("div",{onClick:function(e){return function(e){x.Confirm.show("Are you Sure","Confirm to delete<br/><sub>p.s. It cannot be undone</sub>","Delete","Cancel",(function(){ee.length&&ee.map(function(){var t=(0,a.Z)(o().mark((function t(n,a){var l,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("all"===re){t.next=7;break}I((function(e){var t=e.filter((function(e){return e.product_id!==Number(n)}));return console.log(t),(0,r.Z)(t)})),te([]),console.log(ee),console.log(_),t.next=23;break;case 7:return console.log(re,_[a]),t.prev=8,l=_.filter((function(e,t){if(e.product_id===Number(n))return t})),t.next=12,(0,k.Kr)(_[l]._id);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.log(t.t0);case 17:return console.log(n),c=_.filter((function(e){return e.product_id!==Number(n)})),I((0,r.Z)(c)),te([]),e.target.value="false",t.abrupt("return",n);case 23:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,n){return t.apply(this,arguments)}}())}),(function(){}),{plainText:!1}),I((function(e){var t=e;return console.log(t),(0,r.Z)(t)}))}(e)}},c.createElement(i.Z,{variant:"danger",style:{margin:"0 1.5rem"}},c.createElement(f.e,{style:{width:22,fill:"#fff"}}),"Delete"))):null,c.createElement("h3",{style:{marginTop:"2rem"}},"Manage Products"),c.createElement("p",null,"Convenient and simple way to Edit or Add new Products to the Inventory"),c.createElement(m.Z.Container,{defaultActiveKey:"upload",onSelect:function(e){return ae(e)}},c.createElement(d.Z,{variant:"tabs",className:"flex-column"},c.createElement(p.Z,{style:{marginBottom:"-22px"}},c.createElement(g.Z,{sm:2},c.createElement(d.Z.Item,null,c.createElement(d.Z.Link,{href:"/product/all/",eventKey:"all",title:"All Items",bsPrefix:"nav-link"},"All Products"))),c.createElement(g.Z,{sm:2},c.createElement(d.Z.Item,null,c.createElement(d.Z.Link,{eventKey:"upload",bsPrefix:"nav-link"},"Add Items"))))),c.createElement(m.Z.Content,null,c.createElement(m.Z.Pane,{eventKey:"all"}),c.createElement(m.Z.Pane,{eventKey:"upload"},"file"===z?c.createElement(i.Z,{variant:"primary",onClick:function(){W(!0)},style:{margin:"0 1rem"},className:"downloadButton"},"Add New Products"):"images"===z?c.createElement(c.Fragment,null,c.createElement(i.Z,{variant:"primary",onClick:function(){W(!0)},style:{margin:"0 1rem"},className:"downloadButton"},"Upload Images ",_.length?_.filter((function(e){return!e.hasImage})).length:null),c.createElement(i.Z,{variant:"primary",onClick:function(){return de()},style:{margin:"0 1rem"},className:"downloadButton"},"Save products "),c.createElement(i.Z,{variant:"primary",onClick:function(){M("file"),I([])},style:{margin:"0 1rem"},className:"downloadButton"},"Go Back ")):null,U?c.createElement("div",{className:"FloatWindow"},c.createElement("div",{className:"dropContainer"},c.createElement(s.Z,{onClick:function(){return W(!1)},className:"close_button"}),"file"===z?c.createElement(u.Z.Select,{size:"md",onChange:function(e){return B(e.target.value)}},c.createElement("option",{value:"men_clothing"},"Men Clothing"),c.createElement("option",{value:"women_clothing"},"Women Clothing"),c.createElement("option",{value:"electronics"},"Electronics"),c.createElement("option",{value:"jewellery"},"Jewellery"),c.createElement("option",{value:"accessories"},"Fashion Accessories")):null,"file"===z?c.createElement(y.Z,{setRawData:j,setWaiting:M,setFloat:W}):c.createElement(w.Z,{waiting:z,setWaiting:z,setImages:F,setFloat:W}),"file"===z?c.createElement(c.Fragment,null,c.createElement(i.Z,{as:"a",download:!0,href:"../../static/products_upload_format.csv",variant:"outlined-light",className:"downloadButton"},"Download format",c.createElement("img",{src:v.Z,className:"download_icon"})),c.createElement("footer",{style:{padding:"0.3rem 1rem",background:"#333d",color:"#fff",marginTop:"0.5rem",borderRadius:10}},c.createElement("h6",null,"Note:"),c.createElement("ul",null,c.createElement("li",null,"Mandatory fields : Title , Price , Image , Description"),c.createElement("li",null,"For Image: Only Filename of image to be uploaded, is required E.g. white_shoe.jpg => white_shoe"),c.createElement("li",null,"Duplicate titles are not allowed")))):null)):null,c.createElement(N,{products:_,setProducts:I,editable:ee,setEditable:te,checked:q,setChecked:Y,tab:"upload",setEditingInto:G})))))))}}}}]);
//# sourceMappingURL=component---src-pages-product-upload-js-ad9da109c4e99cbe1ae5.js.map
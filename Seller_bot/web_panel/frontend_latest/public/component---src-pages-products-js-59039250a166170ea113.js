"use strict";(self.webpackChunkwhatstore_merchant_panel=self.webpackChunkwhatstore_merchant_panel||[]).push([[737],{3114:function(e,t,n){var r=n(4942),a=n(5987),l=n(5900),o=n.n(l),i=n(7294),c=n(9541),s=n(5893),u=["bsPrefix","variant","animation","size","as","className"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=i.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,l=e.animation,i=e.size,d=e.as,f=void 0===d?"div":d,p=e.className,g=(0,a.Z)(e,u);n=(0,c.vE)(n,"spinner");var h="".concat(n,"-").concat(l);return(0,s.jsx)(f,m(m({ref:t},g),{},{className:o()(p,h,i&&"".concat(h,"-").concat(i),r&&"text-".concat(r))}))}));f.displayName="Spinner",t.Z=f},2987:function(e,t,n){var r=n(5987),a=n(4942),l=(n(7294),n(5210)),o=n(962),i=n(4650),c=n(1444),s=n(8333),u=n(2002),d=n(5254),m=n(3888),f=n(8771),p=n(5893),g=["id","onSelect","transition","mountOnEnter","unmountOnExit","children","activeKey"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=e.props,n=t.title,r=t.eventKey,a=t.disabled,l=t.tabClassName,o=t.tabAttrs,i=t.id;return null==n?null:(0,p.jsx)(s.Z,{as:"li",role:"presentation",children:(0,p.jsx)(c.Z,b(b({as:"button",type:"button",eventKey:r,disabled:a,id:i,className:l},o),{},{children:n}))})}var y=function(e){var t=(0,l.Ch)(e,{activeKey:"onSelect"}),n=t.id,a=t.onSelect,c=t.transition,s=t.mountOnEnter,h=t.unmountOnExit,y=t.children,E=t.activeKey,w=void 0===E?function(e){var t;return(0,m.Ed)(e,(function(e){null==t&&(t=e.props.eventKey)})),t}(y):E,x=(0,r.Z)(t,g);return(0,p.jsxs)(o.Z,{id:n,activeKey:w,onSelect:a,transition:(0,f.Z)(c),mountOnEnter:s,unmountOnExit:h,children:[(0,p.jsx)(i.Z,b(b({},x),{},{role:"tablist",as:"ul",children:(0,m.UI)(y,v)})),(0,p.jsx)(u.Z,{children:(0,m.UI)(y,(function(e){var t=b({},e.props);return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,p.jsx)(d.Z,b({},t))}))})]})};y.defaultProps={variant:"tabs",mountOnEnter:!1,unmountOnExit:!1},y.displayName="Tabs",t.Z=y},3423:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(2982),a=(n(6636),n(7294)),l=n(8169),o=n(2957);n(9717);function i(e){var t=e.editable,n=e.setEditable,i=e.products,c=(e.setProducts,e.checked),s=e.setChecked,u=(e.tab,e.setEditingInto);(0,a.useEffect)((function(){n([])}),[]);return(0,a.useEffect)((function(){console.log(i),console.log(t),t.length?(1===t.length?u(t[0]):u(),c||s(!0)):s(!1)}),[t]),a.createElement("div",{style:{width:"90vw",overflowX:"auto"}},a.createElement(l.Z,{hover:!0,style:{margin:"1rem 0"}},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",null,"No."),a.createElement("th",null,"Status"),a.createElement("th",null,"Image"),a.createElement("th",null,"Title"),a.createElement("th",null,"Price"),a.createElement("th",null,"Regular price"),a.createElement("th",null,"Stock"),a.createElement("th",null,"Category"),a.createElement("th",null,"Description"),a.createElement("th",null,"Colors"),a.createElement("th",null,"Sizes"),a.createElement("th",null,"Variations"))),a.createElement("tbody",null,i.length?i.map((function(e,l){return e?a.createElement("tr",null,a.createElement("td",{"data-key":e._id},a.createElement(o.Z.Check,{type:"checkbox",style:{width:"1.5rem",height:"1.5rem"},"data-key":e._id,onClick:function(e){return function(e){var a=e.target.dataset.key;console.log(e.target.checked),e.target.checked?t.includes(a)||n((function(e){return[a].concat((0,r.Z)(e))})):n((function(e){var t=e.filter((function(e){return e!==a}));return console.log("old_editables",t),(0,r.Z)(t)}))}(e)}})),a.createElement("td",null,l),a.createElement("td",null,e.status?e.status:"private"),e.imageData||e.image?a.createElement("td",{style:{width:185,display:"block",paddingBottom:12,marginRight:"-1rem"}},a.createElement("img",{src:e.imageData||e.image,style:{maxWidth:150,minWidth:120,borderRadius:10,maxHeight:190,minHeight:160},alt:e.title})):a.createElement("td",null,e.image.replace("./static/images/",""),a.createElement("br",null),a.createElement("span",{style:{border:"#e11",color:"red"}},"Image Required ",console.log(e))),a.createElement("td",{style:{marginLeft:"1rem"}},a.createElement("b",null,e.title)),a.createElement("td",null,e.price),a.createElement("td",null,e.originalPrice),a.createElement("td",null,e.stock),a.createElement("td",null,e.category),a.createElement("td",{style:{padding:"0.5rem 0.2rem"}},a.createElement("div",{style:{width:"190px",height:160,background:"transparent",border:0,resize:"both",overflow:"auto"}},e.description)),a.createElement("td",null,e.colors),a.createElement("td",null,e.sizes),a.createElement("td",null,e.variations)):a.createElement("p",null,"No Products Found")})):null)))}},5468:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var r=n(2982),a=n(5861),l=n(4687),o=n.n(l),i=n(7294),c=n(6594),s=n(9655),u=n(2957),d=n(2987),m=n(6746),f=n(3114),p=n(1984),g=n(7117),h=(n(8161),n(8678)),b=n(1372),v=n(7187),y=n(171),E=n(8881),w=n(9717),x=n(3423),O=n(6636);function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j={display:"flex",height:"calc(100vh)",background:"#fff"},Z={flexGrow:2,flexFlow:"column",alignItems:"flex-start",paddingLeft:"12.5rem",overflowY:"auto",width:"100vw",height:"100vh"},I={flexGrow:2,flexFlow:"column",alignItems:"flex-start",paddingLeft:"6.5rem",overflowY:"auto",width:"100vw",height:"100vh"},_={paddingBottom:"7px",width:".9rem",margin:"0 10px"},N={boxShadow:"0 1px 2px 1px#333a"},P="\n\t    padding: 0.7rem;\n    color: #000;\n    margin-left: 20%;\n    background: #bbb4bcdd;\n    border-radius: 10px;\n    font-weight: 600;\n    box-shadow: 0 0 3px 1px #333;",C={position:"absolute",top:"20vh",background:"#333a",width:"100vw",height:"100vh",display:"grid",transform:"translate(-16vw , -20vh)",placeItems:"center"},D={background:"#fff",placeItems:"center",isolation:"isolate",width:"60vw",padding:"3rem",borderRadius:"10PX",height:"60VH",boxShadow:"0 0 0 10px #333c"},A={position:"fixed",top:75,right:20,display:"flex",justifyContent:"space-between",padding:"1rem"};function R(){if("undefined"!=typeof window){var e=(0,i.useState)(!0),t=e[0],n=e[1],l=(0,i.useState)([]),S=l[0],R=l[1],F=(0,i.useState)([]),z=F[0],K=F[1],L=(0,i.useState)([]),U=L[0],M=L[1],T=(0,i.useState)("men_clothing"),B=T[0],W=T[1],H=(0,i.useState)("file"),J=H[0],G=H[1],Y=(0,i.useState)(!1),q=Y[0],V=Y[1],X=(0,i.useState)(!1),$=(X[0],X[1],(0,i.useState)(null)),Q=($[0],$[1]),ee=(0,i.useState)(!1),te=ee[0],ne=ee[1],re=(0,i.useState)([]),ae=re[0],le=re[1],oe=(0,i.useState)([]),ie=oe[0],ce=oe[1],se=(0,i.useState)("all"),ue=se[0],de=se[1],me=(0,i.useState)(!1),fe=me[0],pe=me[1],ge=(0,i.useState)(!1),he=ge[0],be=ge[1],ve=["title","image","price","originalprice","stock","description","colors","sizes","variations"];(0,i.useEffect)((function(){if(n(!0),"all"===ue){pe(!0);var e=JSON.parse(localStorage.getItem("store_"));if(!e||"undefined"===e)return console.log("store_"),n(!1);var r=JSON.parse(localStorage.getItem("store_")).seller_id;if(!r||"undefined"===r)return console.log("seller_id"),n(!1);(0,w.Rq)(r).then((function(e){console.log(e),pe(!1),e&&(n(!0),console.log(t),e.forEach((function(e){return Object.values(e.properties[0]).forEach((function(e){return e?e=e.join(" , "):null}))})),R(e),console.log(e)),e&&Object.keys(e).length||(console.log("object keys"),n(!1))})).catch((function(e){console.log(e)}))}else R([]),G("file"),console.log(ue)}),[ue]);var ye=function(){var e=[],t=[],n=[],r=[];return S.forEach((function(a,l){"object"==typeof r&&(r.includes(a.title)?e.push({name:a.title,index:l}):r.push(a.title)),isNaN(Number(a.price))&&t.push({type:"Price",value:a,index:l}),isNaN(Number(a.originalprice))&&t.push({type:"Original Price",value:a,index:l}),isNaN(Number(a.stock))&&t.push({type:"Stock",value:a,index:l}),a.hasImage||n.push({index:l,name:a.image})})),{duplicate_name:e,incorrect_number:t,no_image:n}},Ee=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,a,l,i,c,s,u,d,m,f,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ye(),n=t.duplicate_name,a=t.incorrect_number,l=t.no_image,i="",console.log(n,a,l),n.length&&(i+="Duplicate product names Not Allowed<br/>",n.length>2?(s+="Duplicate product names Not Allowed\n",n.forEach((function(e){return s+="@"+e.index+" , name: "+e.name+"\n"}))):(n.forEach((function(e){return i+="@"+e.index+" , name: "+e.name+"<br/>"})),i+="<hr/>")),!a.length){e.next=12;break}if(!(a.length>5)){e.next=9;break}a.forEach((function(e){return u+=e.type+" Should be an Integer<br/>@"+e.index+" , "+e.type+": "+e.value+"\n"})),e.next=12;break;case 9:return e.next=11,a.forEach((function(e){return i+=e.type+" Should be an Integer<br/>@"+e.index+" , "+e.type+": "+e.value+"<br/>"}));case 11:i+="<hr/>";case 12:if(l.length&&(i+="Images are Mandatory<br/>(found image absent in "+l.reduce((function(e,t,n){return n+1}))+" items)<br/>",l.length>2?(c+="Images are Mandatory<br/>(found image absent in "+l.reduce((function(e,t,n){return n+1}))+" items)\n",l.forEach((function(e){return c+="@"+e.index+" , image name:"+e.name.slice(0,130)+"\n"}))):(l.forEach((function(e){return i+="@"+e.index+" , image name:"+e.name.slice(0,30)+"<br/>"})),i+="<hr/>")),!i||!(n.length||l.length||a.length)){e.next=19;break}return d="<b>"+i+"</b><hr/>",d+=c?"<a style='"+P+"' href=\""+window.URL.createObjectURL(new Blob([c],{type:"plain/text"}))+'" download=\'redcat_image_errors.txt\'>Image Error File <img style="width:16px;margin-top:-7px;margin-right:7px" src="'+v.Z+'"/></a><br/>':"",d+=s?"<a style='"+P+"' href='"+window.URL.createObjectURL(new Blob([s],{type:"plain/text"}))+"' download='redcat_name_errors.txt'>Names Error File <img style=\"width:16px;margin-top:-7px;margin-right:7px\" src="+v.Z+"/></a><br/>":"",d+=u?"<a style='"+P+"' href='"+window.URL.createObjectURL(new Blob([u],{type:"plain/text"}))+"' download='redcat_data_errors.txt'>Integrity Error File <img style=\"width:16px;margin-top:-7px;margin-right:7px\" src="+v.Z+"/></a><br/>":"",e.abrupt("return",g.Report.warning("Found Errors",d,"Ok",{backOverlayColor:"#333a",messageFontSize:16,messageFontWeight:700,plainText:!1,messageMaxLength:12200}));case 19:if(i){e.next=39;break}m=k(S);case 21:if((f=m()).done){e.next=39;break}return(p=f.value).price=Number(p.price),p.stock=Number(p.stock),p.originalPrice=Number(p.originalprice),p.imageData=p.image,p.hasImage=!0,p.seller_data=JSON.parse(localStorage.getItem("store_")).seller_id,p.number=JSON.parse(localStorage.getItem("store_")).number,e.prev=30,e.delegateYield(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.properties=[{colors:p.colors,sizes:p.sizes,variations:p.variations}],e.next=3,(0,w.kG)(Object.assign({},p));case 3:t=e.sent,console.log(t),t.success?(G("file"),R([]),de("all")):le((function(e){return[].concat((0,r.Z)(e),[{name:e.name,message:t.message}])}));case 6:case"end":return e.stop()}}),e)}))(),"t0",32);case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(30),console.log(e.t1);case 37:e.next=21;break;case 39:case"end":return e.stop()}}),e,null,[[30,34]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){if(ae.length){for(var e,t="",n=k(ae);!(e=n()).done;){var r=e.value;t+="In Item : "+r.name+" , Error : "+r.message+"\n"}g.Report.failure((1===ae.length?"Error":"Errors")+" Found in Adding data",t,"Ok")}}),[ae]),(0,i.useEffect)((function(){for(var e,t=function(){var t=e.value;console.log(U);S.map((function(e){console.log(t,e),e.image===t.name.replace(".jpg","").replace(".jpeg","").replace(".png","")&&(e.hasImage=!0,e.imageFileName=e.image,e.imageData=t.data,e.image=t.data)}));R((function(e){return(0,r.Z)(S)}))},n=k(U);!(e=n()).done;)t()}),[U]),(0,i.useEffect)((function(){console.log(S)}),[S]),(0,i.useEffect)((function(){if(pe(!0),console.log(z),z.length){var e=z[0];e=e.map((function(e){return e.toLowerCase()}));var t=function(e,t){for(var n,r=new Set(e),a=k(t);!(n=a()).done;){var l=n.value;r.has(l)?r.delete(l):r.add(l)}return r}(new Set(ve),new Set(e));if(t.size>0)return G("file"),pe(!1),g.Report.warning("<b>Issues in Headers found</b>","These Headers do not match Or , are not needed:<br/>"+Array.from(t).join(" , "),"Ok");var n=[],r={},a=z.slice(1);for(var l in e)r[e[l]]=l;for(var o,i=k(a);!(o=i()).done;){var c=o.value;if(c.length&&c[0]){for(var s,u={},d=k(e);!(s=d()).done;){var m=s.value;c[r[m]]&&(u[m]=c[r[m]])}u.hasImage=!1,u.category=B,u.product_id=1e4*Math.random(),n.push(u)}}n.length&&(R((function(e){console.log(e)})),G("images"),pe(!1),R(n)),console.log(n)}}),[z]);return i.createElement(h.Z,null,i.createElement("div",{id:"wrapper",style:j},i.createElement(b.Y,{selected:"products",collapsed:he,setCollapsed:be}),t?null:i.createElement("div",{style:{width:"100%",height:"100%",pointerEvents:"none",position:"absolute",display:"grid",placeItems:"center"}},i.createElement("p",null,"No Products Found")),fe?i.createElement("div",{style:{width:"100%",height:"100%",pointerEvents:"none",position:"absolute",display:"grid",placeItems:"center"}},i.createElement(f.Z,{variant:"primary",animation:"border"})):null,i.createElement("div",{style:he?Z:I},te?i.createElement("div",{style:A},i.createElement("div",{onClick:function(e){return function(e){O.Confirm.show("Are you Sure","Confirm to delete<br/><sub>p.s. It cannot be undone</sub>","Delete","Cancel",(function(){ie.length&&ie.map(function(){var t=(0,a.Z)(o().mark((function t(n,a){var l,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("all"===ue){t.next=7;break}R((function(e){var t=e.filter((function(e){return e.product_id!==Number(n)}));return console.log(t),(0,r.Z)(t)})),ce([]),console.log(ie),console.log(S),t.next=23;break;case 7:return console.log(ue,S[a]),t.prev=8,l=S.filter((function(e,t){if(e.product_id===Number(n))return t})),t.next=12,(0,w.Kr)(S[l]._id);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.log(t.t0);case 17:return console.log(n),i=S.filter((function(e){return e.product_id!==Number(n)})),R((0,r.Z)(i)),ce([]),e.target.value="false",t.abrupt("return",n);case 23:case"end":return t.stop()}}),t,null,[[8,14]])})));return function(e,n){return t.apply(this,arguments)}}())}),(function(){}),{plainText:!1}),R((function(e){var t=e;return console.log(t),(0,r.Z)(t)}))}(e)}},i.createElement(c.Z,{variant:"danger",style:{margin:"0 1.5rem"}},i.createElement(p.e,{style:{width:22,fill:"#fff"}}),"Delete"))):null,i.createElement("h3",{style:{marginTop:"2rem"}},"Manage Products"),i.createElement("p",null,"Convenient and simple way to Edit or Add new Products to the Inventory"),i.createElement(d.Z,{activeKey:ue,onSelect:function(e){return de(e)},className:"mb-3"},i.createElement(m.Z,{eventKey:"all",title:"All Items"},i.createElement(x.Z,{products:S,setProducts:R,editable:ie,setEditable:ce,checked:te,setChecked:ne,setEditingInto:Q})),i.createElement(m.Z,{eventKey:"upload",title:"Add Items"},"file"===J?i.createElement(c.Z,{variant:"primary",onClick:function(){V(!0)},style:Object.assign({margin:"0 1rem"},N)},"Add New Products"):"images"===J?i.createElement(i.Fragment,null,i.createElement(c.Z,{variant:"primary",onClick:function(){V(!0)},style:Object.assign({margin:"0 1rem"},N)},"Upload Images ",S.length?S.filter((function(e){return!e.hasImage})).length:null),i.createElement(c.Z,{variant:"primary",onClick:function(){return Ee()},style:Object.assign({margin:"0 1rem"},N)},"Save products "),i.createElement(c.Z,{variant:"primary",onClick:function(){G("file"),R([])},style:Object.assign({margin:"0 1rem"},N)},"Go Back ")):null,q?i.createElement("div",{style:C},i.createElement("div",{style:D},i.createElement(s.Z,{onClick:function(){return V(!1)},style:{transform:"translate(50vw, -20px)"}}),"file"===J?i.createElement(u.Z.Select,{size:"md",onChange:function(e){return W(e.target.value)}},i.createElement("option",{value:"men_clothing"},"Men Clothing"),i.createElement("option",{value:"women_clothing"},"Women Clothing"),i.createElement("option",{value:"electronics"},"Electronics"),i.createElement("option",{value:"jewellery"},"Jewellery"),i.createElement("option",{value:"accessories"},"Fashion Accessories")):null,"file"===J?i.createElement(y.Z,{setRawData:K,setWaiting:G,setFloat:V}):i.createElement(E.Z,{waiting:J,setWaiting:J,setImages:M,setFloat:V}),"file"===J?i.createElement(c.Z,{as:"a",download:!0,href:"../static/products_upload_format.csv",variant:"outlined-light",style:N},"Download format",i.createElement("img",{src:v.Z,style:_})):null)):null,i.createElement(x.Z,{products:S,setProducts:R,editable:ie,setEditable:ce,checked:te,setChecked:ne,tab:ue,setEditingInto:Q}))))))}return null}}}]);
//# sourceMappingURL=component---src-pages-products-js-59039250a166170ea113.js.map